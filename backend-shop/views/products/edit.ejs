<%- include('../layouts/sidebar') %>
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ch·ªânh s·ª≠a s·∫£n ph·∫©m</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-4">
    <h2 class="text-center mb-4">üìù Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h2>
    <div class="mb-3">
      <a href="/products" class="btn btn-secondary">&larr; Quay l·∫°i danh s√°ch</a>
    </div>
    <form action="/products/<%= product.id %>?_method=PUT" method="POST" class="card p-4 shadow-sm" enctype="multipart/form-data">
      <div class="mb-3">
        <label class="form-label">T√™n s·∫£n ph·∫©m</label>
        <input name="name" class="form-control" required value="<%= product.name %>">
      </div>
      <div class="mb-3">
        <label class="form-label">M√¥ t·∫£</label>
        <textarea name="description" class="form-control"><%= product.description %></textarea>
      </div>
      <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label">Gi√°</label>
          <input type="number" name="price" class="form-control" required value="<%= product.price %>">
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label">S·ªë l∆∞·ª£ng</label>
          <input type="number" name="quantity" class="form-control" required value="<%= product.quantity %>">
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label">Xu·∫•t x·ª©</label>
          <select name="origin" class="form-select" required>
            <option value="">-- Ch·ªçn qu·ªëc gia --</option>
            <option value="Vi·ªát Nam" <%= product.origin === 'Vi·ªát Nam' ? 'selected' : '' %>>Vi·ªát Nam</option>
            <option value="United States" <%= product.origin === 'United States' ? 'selected' : '' %>>United States</option>
            <option value="China" <%= product.origin === 'China' ? 'selected' : '' %>>China</option>
            <option value="Japan" <%= product.origin === 'Japan' ? 'selected' : '' %>>Japan</option>
            <option value="South Korea" <%= product.origin === 'South Korea' ? 'selected' : '' %>>South Korea</option>
            <option value="Germany" <%= product.origin === 'Germany' ? 'selected' : '' %>>Germany</option>
            <option value="France" <%= product.origin === 'France' ? 'selected' : '' %>>France</option>
            <option value="United Kingdom" <%= product.origin === 'United Kingdom' ? 'selected' : '' %>>United Kingdom</option>
            <option value="Italy" <%= product.origin === 'Italy' ? 'selected' : '' %>>Italy</option>
            <option value="Canada" <%= product.origin === 'Canada' ? 'selected' : '' %>>Canada</option>
            <option value="Australia" <%= product.origin === 'Australia' ? 'selected' : '' %>>Australia</option>
            <option value="Thailand" <%= product.origin === 'Thailand' ? 'selected' : '' %>>Thailand</option>
            <option value="Singapore" <%= product.origin === 'Singapore' ? 'selected' : '' %>>Singapore</option>
            <option value="Malaysia" <%= product.origin === 'Malaysia' ? 'selected' : '' %>>Malaysia</option>
            <option value="India" <%= product.origin === 'India' ? 'selected' : '' %>>India</option>
            <option value="Indonesia" <%= product.origin === 'Indonesia' ? 'selected' : '' %>>Indonesia</option>
            <option value="Russia" <%= product.origin === 'Russia' ? 'selected' : '' %>>Russia</option>
            <option value="Brazil" <%= product.origin === 'Brazil' ? 'selected' : '' %>>Brazil</option>
            <option value="Mexico" <%= product.origin === 'Mexico' ? 'selected' : '' %>>Mexico</option>
            <option value="Other" <%= product.origin === 'Other' ? 'selected' : '' %>>Other</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Th∆∞∆°ng hi·ªáu</label>
          <input name="brand" class="form-control" value="<%= product.brand %>">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Danh m·ª•c</label>
          <input name="category" class="form-control" value="<%= product.category %>">
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">H√¨nh ·∫£nh hi·ªán t·∫°i</label>
        <% let imgs = []; try { imgs = JSON.parse(product.images); } catch(e) {} %>
        <% if (Array.isArray(imgs) && imgs.length) { %>
          <div class="d-flex flex-wrap gap-1 mb-2">
            <% imgs.forEach(img => { %>
              <img src="<%= img %>" alt="·∫¢nh" style="width:60px;height:60px;object-fit:cover;border-radius:4px;">
            <% }) %>
          </div>
        <% } else { %>
          <div class="text-muted">Ch∆∞a c√≥ h√¨nh ·∫£nh</div>
        <% } %>
      </div>
      <div class="mb-3">
        <label class="form-label">Th√™m h√¨nh ·∫£nh m·ªõi (c√≥ th·ªÉ ch·ªçn nhi·ªÅu)</label>
        <input type="file" name="images" class="form-control" accept="image/*" multiple>
      </div>
      <div class="text-end">
        <button class="btn btn-primary">C·∫≠p nh·∫≠t</button>
      </div>
    </form>
  </div>
</body>
</html>